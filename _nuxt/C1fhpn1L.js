import{f as $,m as ee,V as F,_ as te,a as se,b as f,c as B}from"./BcmfyjKA.js";import{m as oe,c as ie,d as le,e as ae,f as ne,g as N,h as de,i as re,a as ue,L as ce,k as me,j as D,V as U}from"./mGIYyGnK.js";import{m as fe,u as O,b as be,V as ve}from"./BOJ3csCV.js";import{J as W,a7 as j,r as E,z as l,a3 as R,a8 as Ve,i as L,a9 as ge,aa as Se,a6 as T,ab as we,_ as ye,a as M,ac as pe,A as c,t as he,ad as z,x as p,ae as ke,af as Ce,B as I,y as Pe}from"./CUd5fla0.js";import"./DI5Ofg2I.js";const xe=W({...fe(),...oe()},"VForm"),De=j()({name:"VForm",props:xe(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:m,emit:s}=t;const o=ie(e),a=E();function b(d){d.preventDefault(),o.reset()}function i(d){const r=d,n=o.validate();r.then=n.then.bind(n),r.catch=n.catch.bind(n),r.finally=n.finally.bind(n),s("submit",r),r.defaultPrevented||n.then(V=>{var g;let{valid:h}=V;h&&((g=a.value)==null||g.submit())}),r.preventDefault()}return O(()=>{var d;return l("form",{ref:a,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:b,onSubmit:i},[(d=m.default)==null?void 0:d.call(m,o)])}),$(o,a)}}),Ue=W({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...le(),...ee()},"VSwitch"),Ie=j()({name:"VSwitch",inheritAttrs:!1,props:Ue(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:m,slots:s}=t;const o=R(e,"indeterminate"),a=R(e,"modelValue"),{loaderClasses:b}=ae(e),{isFocused:i,focus:d,blur:r}=ne(e),n=E(),V=Ve&&window.matchMedia("(forced-colors: active)").matches,h=L(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),g=ge(),J=L(()=>e.id||`switch-${g}`);function X(){o.value&&(o.value=!1)}function q(S){var w,y;S.stopPropagation(),S.preventDefault(),(y=(w=n.value)==null?void 0:w.input)==null||y.click()}return O(()=>{const[S,w]=Se(m),y=N.filterProps(e),G=F.filterProps(e);return l(N,T({class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":o.value},b.value,e.class]},S,y,{modelValue:a.value,"onUpdate:modelValue":k=>a.value=k,id:J.value,focused:i.value,style:e.style}),{...s,default:k=>{let{id:H,messagesId:K,isDisabled:Q,isReadonly:Y,isValid:A}=k;const C={model:a,isValid:A};return l(F,T({ref:n},G,{modelValue:a.value,"onUpdate:modelValue":[v=>a.value=v,X],id:H.value,"aria-describedby":K.value,type:"checkbox","aria-checked":o.value?"mixed":void 0,disabled:Q.value,readonly:Y.value,onFocus:d,onBlur:r},w),{...s,default:v=>{let{backgroundColorClasses:P,backgroundColorStyles:u}=v;return l("div",{class:["v-switch__track",V?void 0:P.value],style:u.value,onClick:q},[s["track-true"]&&l("div",{key:"prepend",class:"v-switch__track-true"},[s["track-true"](C)]),s["track-false"]&&l("div",{key:"append",class:"v-switch__track-false"},[s["track-false"](C)])])},input:v=>{let{inputNode:P,icon:u,backgroundColorClasses:Z,backgroundColorStyles:_}=v;return l(we,null,[P,l("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":u||e.loading},e.inset||V?void 0:Z.value],style:e.inset?void 0:_.value},[s.thumb?l(de,{defaults:{VIcon:{icon:u,size:"x-small"}}},{default:()=>[s.thumb({...C,icon:u})]}):l(re,null,{default:()=>[e.loading?l(ce,{name:"v-switch",active:!0,color:A.value===!1?void 0:h.value},{default:x=>s.loader?s.loader(x):l(me,{active:x.isActive,color:x.color,indeterminate:!0,size:"16",width:"2"},null)}):u&&l(ue,{key:String(u),icon:u,size:"x-small"},null)]})])])}})}})}),{}}}),Ae={setup(){return{store:be()}},data(){return{wifiList:[],apStatus:-1,show1:!1,show2:!1,secondary:!1,isValid:!0}},computed:{},created(){const{$listen:e}=M();e("bt:connected",()=>{console.log("bt connected")}),e("bt:disconnected",()=>{console.log("bt disconnected"),this.$refs.form.reset()})},mounted(){this.recieveWifiList()},beforeDestroy(){const{$off:e}=M();e("bt:connected",{}),e("bt:disconnected",{})},methods:{ruleDmx:e=>!e||/^[0-9]{0,3}$/.test(e.toString())&&e>=1&&e<=512||"The field must be a valid decimal 1 to 512",ruleUniverse:e=>!e||/^[0-9]{0,2}$/.test(e.toString())&&e>=0&&e<=15||"The field must be a valid decimal 0 to 15",async recieveWifiList(){if(this.$espconfig.ssidListUuid){const e=new TextDecoder("windows-1252");let t=await this.$espconfig.readSsidlist();if(t)return t=e.decode(t),t=JSON.parse(t),this.wifiList=t.SSID,t;this.dropdownMessage="-- SSID from ESP32 --"}},async submit(e){this.store.config.ssidSec||(this.store.config.ssidSec=this.store.config.ssidPrim,this.store.config.pwSec=this.store.config.pwPrim),this.$espconfig.writeCredentials(D(this.store.apName,this.store.config))},reset(e){this.$espconfig.writeCredentials(D(this.store.apName,{reset:""}))},identify(e){this.$espconfig.writeCredentials(D(this.store.apName,{identify:""}))}}};function Fe(e,t,m,s,o,a){const b=te;return he(),pe(b,null,{default:c(()=>[l(ve,{class:"mb-5"},{default:c(()=>[l(De,{ref:"form",method:"POST",onSubmit:z(a.submit,["prevent"]),onReset:z(a.reset,["prevent"]),class:"ga-0",modelValue:o.isValid,"onUpdate:modelValue":t[11]||(t[11]=i=>o.isValid=i),disabled:!s.store.btStat},{default:c(()=>[l(se,{fluid:""},{default:c(()=>[t[15]||(t[15]=p("h2",null,"WiFi configuration",-1)),l(f,{label:"Primary SSID","hide-details":"auto",modelValue:s.store.config.ssidPrim,"onUpdate:modelValue":t[0]||(t[0]=i=>s.store.config.ssidPrim=i)},null,8,["modelValue"]),l(B,{label:"Available SSIDs",density:"compact","hide-details":"auto",items:o.wifiList,modelValue:s.store.config.ssidPrim,"onUpdate:modelValue":t[1]||(t[1]=i=>s.store.config.ssidPrim=i)},null,8,["items","modelValue"]),l(f,{"hide-details":"auto",modelValue:s.store.config.pwPrim,"onUpdate:modelValue":t[2]||(t[2]=i=>s.store.config.pwPrim=i),"append-icon":o.show1?"mdi-eye":"mdi-eye-off",type:o.show1?"text":"password",label:"Primary password","onClick:append":t[3]||(t[3]=i=>o.show1=!o.show1)},null,8,["modelValue","append-icon","type"]),l(Ie,{modelValue:o.secondary,"onUpdate:modelValue":t[4]||(t[4]=i=>o.secondary=i),label:"Use secondary SSID"},null,8,["modelValue"]),ke(p("div",null,[l(f,{label:"Secondary SSID","hide-details":"auto",modelValue:s.store.config.ssidSec,"onUpdate:modelValue":t[5]||(t[5]=i=>s.store.config.ssidSec=i),disabled:!o.secondary},null,8,["modelValue","disabled"]),l(B,{label:"Available SSIDs",density:"compact","hide-details":"auto",items:o.wifiList,modelValue:s.store.config.ssidSec,"onUpdate:modelValue":t[6]||(t[6]=i=>s.store.config.ssidSec=i),disabled:!o.secondary},null,8,["items","modelValue","disabled"]),l(f,{modelValue:s.store.config.pwSec,"onUpdate:modelValue":t[7]||(t[7]=i=>s.store.config.pwSec=i),"append-icon":o.show2?"mdi-eye":"mdi-eye-off",type:o.show2?"text":"password",disabled:!o.secondary,label:"Secondary password","hide-details":"auto","onClick:append":t[8]||(t[8]=i=>o.show2=!o.show2)},null,8,["modelValue","append-icon","type","disabled"])],512),[[Ce,o.secondary]]),t[16]||(t[16]=p("h2",null,"DMX configuration",-1)),l(f,{label:"Start address","hide-details":"auto",rules:[i=>a.ruleDmx(i)],modelValue:s.store.config.stAddr,"onUpdate:modelValue":t[9]||(t[9]=i=>s.store.config.stAddr=i)},null,8,["rules","modelValue"]),l(f,{label:"ArtNet universe","hide-details":"auto",rules:[i=>a.ruleUniverse(i)],modelValue:s.store.config.stUni,"onUpdate:modelValue":t[10]||(t[10]=i=>s.store.config.stUni=i)},null,8,["rules","modelValue"]),l(U,{type:"submit",disabled:!(s.store.btStat&&o.isValid)},{default:c(()=>t[12]||(t[12]=[I(" Save")])),_:1},8,["disabled"]),l(U,{type:"reset",disabled:!s.store.btStat},{default:c(()=>t[13]||(t[13]=[I("Reboot")])),_:1},8,["disabled"]),l(U,{onClick:a.identify,disabled:!s.store.btStat},{default:c(()=>t[14]||(t[14]=[I("Identify")])),_:1},8,["onClick","disabled"])]),_:1}),p("div",null,"Build date: "+Pe(s.store.config.date),1)]),_:1},8,["onSubmit","onReset","modelValue","disabled"])]),_:1})]),_:1})}const Me=ye(Ae,[["render",Fe]]);export{Me as default};
